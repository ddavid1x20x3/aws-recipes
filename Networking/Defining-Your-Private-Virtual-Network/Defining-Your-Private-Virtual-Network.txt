# Defining Your Private Virtual Network in the Cloud by Creating an Amazon VPC

# Problem:
# You need a network foundation to host cloud resources.

# Solution:
# You will create an Amazon Virtual Private Cloud (VPC) and configure a Classless
# Inter-Domain Routing (CIDR) block for it.

# Steps

# Create a VPC with an IPv4 CIDR block. We will use 10.10.0.0/16 as the address
# range, but you can modify it based on your needs:
VPC_ID=$(aws ec2 create-vpc --cidr-block 10.10.0.0/16 \
--tag-specifications \
'ResourceType=vpc,Tags=[{Key=Name,Value=DemoVCP}]' \
--output text --query Vpc.VpcId)

# If an any point you need to add an additional CIDR to the VPC, run:
aws ec2 associate-vpc-cidr-block \
--cidr-block 10.11.0.0/16 \
--vpc-id $VPC_ID

# In addition to IPv4, VPC also supports IPv6. You can configure an Amazon-provided
# IPv6 CIDR block by specifying the --amazon-provided-ipv6-cidr-block option.
# Here is an example of creating a VPC with an IPv6 CIDR block:
aws ec2 create-vpc --cidr-block 10.10.0.0/16 \
--amazon-provided-ipv6-cidr-block \
--tag-specifications
'ResourceType=vpc,Tags=[{Key=Name,Value=AWSCookbook201-IPv6}]'

# Validation Checks

# Verify that the VPCâ€™s state is available:
aws ec2 describe-vpcs --vpc-ids $VPC_ID

# Clean up

# Delete the VPC you created:
aws ec2 delete-vpc --vpc-id $VPC_ID

# Unset the environment variable that you created manually:
unset VPC_ID
